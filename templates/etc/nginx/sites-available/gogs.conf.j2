server {

    #listen 443 default ssl;
    listen 80;

    server_name {{gogs_app_hostname}};

    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 9;
    gzip_buffers 16 8k;
    gzip_types application/json;

    #ssl_certificate      /etc/nginx/keys/gogs.crt+bundle;
    #ssl_certificate_key  /etc/nginx/keys/gogs.key;
    #ssl_prefer_server_ciphers on;

    access_log /var/log/nginx/gogs.access.log;
    error_log  /var/log/nginx/gogs.error.log;

    location /static/ {
        alias {{gogs_app_home}}/public;
    }

    location / {

        proxy_pass http://{{gogs_app_bind_address}}:{{gogs_app_bind_port}};

        proxy_read_timeout  1m;
        proxy_set_header    Host $http_host;
        proxy_redirect      off;
        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header    X-Forwarded-Protocol ssl;
        proxy_set_header    X-Forwarded-SSL on;
    }
}
